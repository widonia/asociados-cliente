angular.module("ui.tinymce",[]).value("uiTinymceConfig",{}).directive("uiTinymce",["uiTinymceConfig",function(e){e=e||{};var n=0;return{priority:10,require:"ngModel",link:function(i,t,u,o){var c,a,r,l=function(){o.$setViewValue(t.val()),i.$root.$$phase||i.$apply()};if(u.id||u.$set("id","uiTinymce"+n++),c=u.uiTinymce?i.$eval(u.uiTinymce):{},c.setup){var s=c.setup;delete c.setup}a={setup:function(e){e.on("init",function(e){o.$render(),o.$setPristine()}),e.on("ExecCommand",function(n){e.save(),l()}),e.on("KeyUp",function(n){e.save(),l()}),e.on("SetContent",function(n){n.initial||o.$viewValue===n.content||(e.save(),l())}),e.on("blur",function(e){t.blur()}),e.on("ObjectResized",function(n){e.save(),l()}),s&&s(e)},mode:"exact",elements:u.id},angular.extend(a,e,c),setTimeout(function(){tinymce.init(a)}),o.$render=function(){r||(r=tinymce.get(u.id)),r&&r.setContent(o.$viewValue||"")},i.$on("$destroy",function(){r||(r=tinymce.get(u.id)),r&&(r.remove(),r=null)})}}}]);