function run_example(e){if(e>=examples.length)return void phantom.exit(0);var t=examples[e],n=0,o=webpage.create();o.viewportSize={width:500,height:300},o.clipRect={width:500,height:300},o.onAlert=function(e){var a=JSON.parse(e);"snapshot"==a.fn?(o.render("output/"+t.name+n+".png"),n+=1):"mousemove"==a.fn&&o.sendEvent("mousemove",a.x,a.y)},o.open(html_path,function(n){"fail"==n?(console.log("Failed to load test page: "+t.name),phantom.exit(1)):o.evaluate(t.runner),o.close(),run_example(e+1)})}var webpage=require("webpage"),fs=require("fs"),html_path=fs.absolute("test.html"),examples=[];exports.def=function(e,t){examples.push({name:e,runner:t})},exports.run=function(){fs.isDirectory("output")?fs.list("output").forEach(function(e){"."!=e&&".."!=e&&fs.remove("output/"+e)}):fs.makeDirectory("output"),run_example(0)};